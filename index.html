<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Vocabulary Flashcard</title>
    <!-- PRELOAD INSTRUCTIONS START HERE -->
    <link rel="preload" as="image" href="images/background.png">
    <link rel="preload" as="image" href="images/0.png">
    <link rel="preload" as="image" href="images/1.png">
    <link rel="preload" as="image" href="images/2.png">
    <link rel="preload" as="image" href="images/3.png">
    <link rel="preload" as="image" href="images/4.png">
    <link rel="preload" as="image" href="images/5.png">
    <link rel="preload" as="image" href="images/6.png">
    <link rel="preload" as="image" href="images/7.png">
    <link rel="preload" as="image" href="images/8.png">
    <!-- PRELOAD INSTRUCTIONS END HERE -->
    <style>
       h1 {
            font-family: 'Comic Sans MS', sans-serif;
            font-size: 2.5em;
            text-align: center;
            margin-top: 50px;

            /* Subtle Text Shadow for Depth */
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        /* Hover Effect */
        h1:hover {
            transform: scale(1.1);
            transition: transform 0.3s ease;
        }

        
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f4f9;
            background-image: url('images/background.png');
            background-size: cover; /* Scales image to cover the entire background */
            background-position: center; /* Centers the image */
            background-repeat: no-repeat; /* Prevents image from repeating */
        }

        #image-container {
            margin-bottom: 20px;
            border: 5px solid #ccc;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        #myImage {
            width: 400px; 
            height: 400px;
            object-fit: cover; 
            display: block;
            opacity: 1; /* Start fully visible */
            transition: opacity 0.3s ease-in-out; /* Smooth transition */
        }

        /* New CSS for when the image is loading */
        .image-loading {
            opacity: 0; /* Make the image invisible */
        }

        #button-group {
            display: flex; /* Makes the buttons sit next to each other */
            gap: 15px;    /* Adds space between the buttons */
        }

        .action-button {
            padding: 12px 25px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        #randomImageButton {
            background-color: #007bff;
            color: white;
        }

        #randomImageButton:hover {
            background-color: #0056b3;
        }

        #specialImageButton {
            background-color: #28a745; /* A different color for the special button */
            color: white;
        }

        #specialImageButton:hover {
            background-color: #1e7e34;
        }
        /* New CSS for the loading state */
        .loading {
            background-color: #ffc107 !important; /* Yellow for attention */
            cursor: wait !important;
            pointer-events: none; /* Disables clicking during the 'wait' state */
        }
        
        /* NEW CSS for the text overlay */
        #text-overlay {
            position: fixed; /* Position relative to the viewport */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Center it perfectly */
            z-index: 1000; /* Ensure it's on top of everything */
            font-family: 'Comic Sans MS', sans-serif;
            font-size: 3em;
            font-weight: bold;
            color: white;
            background-color: rgba(0, 0, 0, 0.8); /* Semi-transparent black background */
            padding: 20px 40px;
            border-radius: 10px;
            opacity: 0; /* Start hidden */
            transition: opacity 0.3s ease-in-out; /* Smooth fade in/out */
            pointer-events: none; /* Allows clicks to pass through when hidden */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .show-text {
            opacity: 1 !important; /* Force visibility */
        }
/* ---------- NEW: ROW FOR IMAGE + DICE ---------- */
        #main-row{
            display:flex;
            align-items:center;
            gap:30px;               /* space between picture and dice */
            margin-bottom:20px;
        }

        /* ---------- DICE STYLES ---------- */
        .dice-wrapper{
            perspective:800px;      /* 3-D space */
            cursor:pointer;
        }
        .dice{
            width:120px;height:120px;
            position:relative;
            transform-style:preserve-3d;
            transition:transform 0.8s cubic-bezier(.2,.85,.4,1.2);
        }
        .dice-face{
            position:absolute;
            width:120px;height:120px;
            background:#fff;
            border:4px solid #333;
            border-radius:12px;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size:60px;
            font-weight:bold;
            color:#222;
            box-shadow:inset 0 0 15px rgba(0,0,0,.2);
            backface-visibility:hidden;
        }
        .dice-face::before{
            content:'';
            position:absolute;
            width:20px;height:20px;
            background:#333;
            border-radius:50%;
        }
        /* dot positions */
        .face-1::before{transform:translate(0,0);}
        .face-2::before{transform:translate(-30px,-30px);}
        .face-2::after{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(30px,30px);}
        .face-3::before{transform:translate(-30px,-30px);}
        .face-3::after{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(30px,30px);}
        .face-3 .mid::before{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(0,0);}
        .face-4::before{transform:translate(-30px,-30px);}
        .face-4::after{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(30px,-30px);}
        .face-4 .bot::before{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(-30px,30px);}
        .face-4 .bot::after{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(30px,30px);}
        .face-5::before{transform:translate(-30px,-30px);}
        .face-5::after{content:'';position:absolute;width:20px;height:20px;background:#333372;border-radius:50%;transform:translate(30px,-30px);}
        .face-5 .mid::before{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(0,0);}
        .face-5 .bot::before{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(-30px,30px);}
        .face-5 .bot::after{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;transform:translate(30px,30px);}
        .face-6 .row::before,.face-6 .row::after{content:'';position:absolute;width:20px;height:20px;background:#333;border-radius:50%;}
        .face-6 .row:nth-of-type(1){top:20px;}
        .face-6 .row:nth-of-type(2){top:50%;transform:translateY(-50%);}
        .face-6 .row:nth-of-type(3){bottom:20px;}
        .face-6 .row:nth-of-type(1)::before{left:20px;}
        .face-6 .row:nth-of-type(1)::after{right:20px;}
        .face-6 .row:nth-of-type(2)::before{left:20px;}
        .face-6 .row:nth-of-type(2)::after{right:20px;}
        .face-6 .row:nth-of-type(3)::before{left:20px;}
        .face-6 .row:nth-of-type(3)::after{right:20px;}

        /* rotate each face into position */
        .front  {transform:translateZ(60px);}
        .back   {transform:rotateX(180deg) translateZ(60px);}
        .right  {transform:rotateY(90deg) translateZ(60px);}
        .left   {transform:rotateY(-90deg) translateZ(60px);}
        .top    {transform:rotateX(90deg) translateZ(60px);}
        .bottom {transform:rotateX(-90deg) translateZ(60px);}

        /* helper for row in face-6 */
        .row{position:absolute;width:100%;height:0;}
        .mid,.bot{position:relative;display:inline-block;}
    </style>
</head>
<body>

    <h1>Word Picture Challenge</h1>

    <!-- 1. The Image Element -->
    <div id="image-container">
        <!-- Start by showing the first image -->
        <img id="myImage" src="images/0.png" alt="Currently displayed image" decoding="async">
    </div>

    <!-- 2. The Button Group -->
    <div id="button-group">
        <button id="randomImageButton" class="action-button">Show Random Image</button>
        <button id="specialImageButton" class="action-button">Back To Ready</button>
    </div>

    <!-- 3. New Text Overlay Element -->
    <div id="text-overlay">NEW IMAGE</div>

    
<!-- 4. The JavaScript (UPDATED with New Text Overlay Logic) -->
    <script>
        // Get references to the HTML elements
        const imageElement = document.getElementById('myImage');
        const randomButton = document.getElementById('randomImageButton');
        const specialButton = document.getElementById('specialImageButton');
        // New reference to the text overlay
        const textOverlay = document.getElementById('text-overlay'); 


        // Configuration
        // This is the number of "flashcard" images (1.png to 8.png = 8 images).
        // The index 0 is reserved for the 'Ready' screen.
        const TOTAL_IMAGES = 8; 
        let currentImageIndex = 0; 
        const SPECIAL_IMAGE_PATH = 'images/0.png'; 
        
        // --- Feedback Function (for buttons) ---
        function setButtonLoading(button, originalText, isLoading) {
            if (isLoading) {
                button.classList.add('loading');
                button.textContent = 'Loading...';
            } else {
                // Re-enable the button
                button.classList.remove('loading');
                button.textContent = originalText;
            }
        }

        // --- Image Load Handler ---
        // This function runs every time a new image finishes loading
        imageElement.addEventListener('load', function() {
            // 1. Remove the loading class to make the image visible again (fades in due to CSS)
            imageElement.classList.remove('image-loading');

            // 2. Re-enable the button that was just clicked
            // Check which button is currently disabled and re-enable it
            // Note: The text in setButtonLoading must match what was set initially
            if (randomButton.classList.contains('loading')) {
                setButtonLoading(randomButton, "Show Random Image", false);
            } else if (specialButton.classList.contains('loading')) {
                setButtonLoading(specialButton, "Ready!", false);
            }
        });

        // --- Core Image Change Function ---
        function changeImage(newPath, button) {
            // 1. Check if already loading/disabled
            if (button.classList.contains('loading')) {
                return;
            }

            // 2. Set the visual loading state immediately for the button
            const originalText = button.id === 'randomImageButton' ? "Show Random Image" : "Ready!";
            setButtonLoading(button, originalText, true);

            // 3. Set the image element to the loading state (opacity: 0)
            imageElement.classList.add('image-loading');

            // 4. Update the image source (The 'load' event handler above will manage visibility)
            imageElement.src = newPath;
        }

        // --- Random Button Logic (UPDATED) ---
        randomButton.addEventListener('click', function() {
            
            // 1. Check if already loading/disabled
            if (randomButton.classList.contains('loading')) {
                return;
            }

            // Temporarily set the button to 'loading' state to prevent re-clicks during the 1-second display.
            randomButton.classList.add('loading'); 
            
            // 2. Show the text overlay
            textOverlay.classList.add('show-text');

            // 3. Set a timeout for 1 second
            setTimeout(() => {
                
                // a. Hide the text overlay
                textOverlay.classList.remove('show-text');

                // b. Remove the temporary 'loading' state so that `changeImage` can set up its own state.
                randomButton.classList.remove('loading'); 

                // c. Generate a new index different from the current one
                let newIndex;
                do {
                    // Generate a random index between 1 and TOTAL_IMAGES (i.e., 1 to 8)
                    newIndex = Math.floor(Math.random() * TOTAL_IMAGES) + 1;
                } while (newIndex === currentImageIndex); // <<< THE LOGIC TO PREVENT DUPLICATES

                // Update the current index and path
                currentImageIndex = newIndex;
                const newImagePath = `images/${currentImageIndex}.png`;

                // d. Reset special button text
                specialButton.textContent = "Back To Ready";

                // e. Call the shared image change function (which will re-apply 'loading' class 
                //    and change button text to 'Loading...').
                changeImage(newImagePath, randomButton);

            }, 1000); // 1000 milliseconds = 1 second
        });


        // --- Special Button Logic (UNCHANGED) ---
        specialButton.addEventListener('click', function() {
            
            // Check if the special image is ALREADY showing (index 0)
            if (currentImageIndex === 0) {
                return; 
            }
            
            // Set index and reset random button text
            currentImageIndex = 0; 
            randomButton.textContent = "Show Random Image";

            // Call the shared image change function
            changeImage(SPECIAL_IMAGE_PATH, specialButton);
        });


        // Set initial button text when the page loads
        randomButton.textContent = "Show Random Image";
        specialButton.textContent = "Ready!";
        
        // **Important:** Initial state setup. The first image is already loaded 
        // when the page loads, so we don't need the 'image-loading' class.
        <!-- ---------- NEW DICE JS ---------- -->
    <script>
        const diceWrapper = document.getElementById('diceWrapper');
        const dice = document.getElementById('dice');

        // map face numbers â†’ rotation (random but looks like a real roll)
        const rotations = [
            {x: 0,   y: 0},     // 1
            {x: 180, y: 0},     // 2
            {x: 0,   y: -90},   // 3
            {x: 0,   y: 90},    // 4
            {x: -90, y: 0},     // 5
            {x: 90,  y: 0}      // 6
        ];

        diceWrapper.addEventListener('click', () => {
            const face = Math.floor(Math.random() * 6); // 0-5
            const rot = rotations[face];
            // add a little extra spin for visual flair
            const extra = Math.floor(Math.random() * 4) * 360;
            dice.style.transform = `rotateX(${rot.x + extra}deg) rotateY(${rot.y + extra}deg)`;
        });
    </script>
</body>
</html>
